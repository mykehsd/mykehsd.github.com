<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title> Splunk logger for your magento application |  webHines Consulting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">
    <link href="/assets/fontawesome/css/font-awesome.css" rel="stylesheet">
    <link href="/assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/assets/css/docs.css" rel="stylesheet">
    <link href="/assets/js/google-code-prettify/prettify.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-30840647-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar">

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/index.html">webHines</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active">
                <a href="/index.html">About Us</a>
              </li>
              <li class="">
                <a href="/blog.html">Blog</a>
              </li>
              <li class="">
                <a href="/tech.html">Technologies</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

<div class="container">

  <div class="marketing">

    <h1>A new approach to web development.</h1>
    <p class="marketing-byline">We believe in a straightforward and honest communication with our clients</p>

    <hr class="soften">

    <p>Splunk is a great log management tool that can be a valuable resource for your magento deployment. You can send any type of content splunk and use it for historical analysis of sales data, catalog updates, systems interactions, api logging, etc. There are two ways to configure this interaction with splunk: #1) Have your splunk server listen on a port number that receives data. #2) Have splunk forwarders on every server that then relay the data. There's pro's and con's to each solution, however I think the easiest and most reliable is the first method. First we need to setup splunk to receive data over a port, navigate to the "Manager" section and find "Data inputs"</p><p><img alt='' class='posterous_plugin_object posterous_plugin_object_image' src='http://getfile7.posterous.com/getfile/files.posterous.com/webhines/1hv0NfRz8bzVIYc5mduMRkf1BxKPkZaxDOKiB11LBHMBc8nmtPY4LqoSZHqb/Unknown-4.png.thumb100.jpg?content_part=SlL8sipoRJkhPgJjKuCR' height='100' width='100' /></p><p>Add a new TCP input and write down the port # you select.</p><p><img alt='' class='posterous_plugin_object posterous_plugin_object_image' src='http://getfile3.posterous.com/getfile/files.posterous.com/webhines/TrZdM9NXeP15AH3uXMp4zSyxElv6zXZ5h0k7sMknuc0kFmFBtPMFUAYFLmSl/Unknown-3.png.thumb100.jpg?content_part=h79COLv4yXbFmMFv4aSR' height='100' width='100' /></p><p>Next we setup a log helper that will deliver the data to splunk (you could overwrite any of the existing functions like Mage::log(), however this method is a bit more selective what is sent over). <br /> <br />class YourModule_Log_Helper_Remote extends Mage_Core_Helper_Data { <br />&nbsp;private $host = ''; // Enter your IP address of the splunk server. <br />&nbsp;private $port = ''; // Enter your port number here <br />&nbsp;private $resource; <br />&nbsp;public function send ($data) { <br />&nbsp;&nbsp; try { <br />&nbsp;&nbsp; &nbsp; $this-&gt;resource = fsockopen($this-&gt;host, $this-&gt;port, $errno, $errstr, 10); <br />&nbsp;&nbsp; &nbsp; fwrite($this-&gt;resource, $data); <br />&nbsp;&nbsp; &nbsp; fclose($this-&gt;resource); <br />&nbsp;&nbsp; } catch (Exception $e) { <br />&nbsp;&nbsp; &nbsp; Mage::log("Could not write to remote logging agent: $data\n"); <br />&nbsp;&nbsp; } <br />&nbsp;}</p><p>} <br /> <br /> <br /> <br />To invoke the service just execute: <br /> Mage::helper('log/remote')-&gt;sent("This text will be sent to splunk"); <br /> <br />It's best to format your log lines in a splunk friendly way. It will automatically index any data that has a key=value format like: <br /> "sku=123456 has been deactivated" <br /> "order_id=4956 has been sent to fulfillment" <br /> "customer_id=444938 imported from Ebay API" <br /> <br /> <br />Good luck!</p>

  </div>

</div>



    <!-- Footer
    ================================================== -->
    <footer class="footer">
      <div class="container">
	<p>For more information, please <a href="mailto:myke@webhines.com">contact</a> Myke Hines for more information.</p>
      </div>
    </footer>



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/google-code-prettify/prettify.js"></script>
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script>
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>
    <script src="assets/js/bootstrap-affix.js"></script>
    <script src="assets/js/application.js"></script>

  </body>
</html>
